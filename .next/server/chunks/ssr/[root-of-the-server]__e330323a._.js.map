{"version":3,"sources":["turbopack:///[project]/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-dom.ts","turbopack:///[project]/src/app/documentos/page.jsx","turbopack:///[project]/src/serverless/db/listenPedidos/index.js"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactDOM\n","'use client'\nimport { useState, useEffect } from 'react';\nimport { listenPedidos } from '../../serverless/db/listenPedidos';\nimport LoadingSpinner from '../components/loading';\n\nexport default function ListDocuments() {\n    const [pedidos, setPedidos] = useState([]);\n    const [isLoading, setIsLoading] = useState(true);\n\n    useEffect(() => {\n        const unsubscribe = listenPedidos((newPedidos) => {\n            setPedidos(newPedidos);\n            setIsLoading(false);\n        });\n\n        // Cleanup subscription on component unmount\n        return () => unsubscribe();\n    }, []);\n\n    const formatCurrency = (value) => {\n        return new Intl.NumberFormat('es-CL', { style: 'currency', currency: 'CLP' }).format(value);\n    };\n\n    const handleSendWhatsApp = (pedido, totalPedido) => {\n        const phone = '56990059578';\n        let message = `*Nuevo Pedido:*\\n`;\n        message += `*Cliente:* ${pedido.client}\\n`;\n        message += '*Detalle del pedido:*\\n';\n        message += '```\\n'; // Using code block for better formatting\n\n        pedido.products.forEach(item => {\n            const totalItem = formatCurrency(item.quantity * item.product.selectedPrice.price);\n            message += `${item.quantity}x ${item.product.nombre} ${item.product.peso}Kg - ${totalItem}\\n`;\n        });\n\n        message += '```\\n';\n        message += `*Total Pedido:* ${formatCurrency(totalPedido)}`;\n\n        const whatsappUrl = `https://api.whatsapp.com/send?phone=${phone}&text=${encodeURIComponent(message)}`; \n\n        window.open(whatsappUrl, '_blank');\n    };\n\n\n    return (\n        <div style={{ fontFamily: 'Arial, sans-serif', padding: '20px', backgroundColor: '#f0f2f5', width:\"100vw\" }}>\n           {isLoading && <LoadingSpinner />}\n            <h1 style={{ color: '#333', borderBottom: '2px solid #ccc', paddingBottom: '10px', marginBottom: '20px' }}>Lista de Pedidos</h1>\n            {pedidos.length === 0 ? (\n                <p style={{ textAlign: 'center', color: '#666' }}>No hay pedidos para mostrar.</p>\n            ) : (\n                <div style={{ width:\"100%\", display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(400px, 1fr))', gap: '20px' }}>\n                    {pedidos.map((pedido) => {\n                        const totalPedido = (pedido.products || []).reduce((acc, item) => acc + (item.quantity * item.product.selectedPrice.price), 0);\n\n                        return (\n                            <div key={pedido.id} style={{ width:\"100%\",background: '#fff', padding: '20px', borderRadius: '8px', boxShadow: '0 4px 8px rgba(0,0,0,0.1)' }}>\n                                <h2 style={{ color: '#0056b3', marginBottom: '15px', borderBottom: '1px solid #eee', paddingBottom: '10px' }}>Pedido: {pedido.client}</h2>\n\n                                <table style={{ width: '100%', borderCollapse: 'collapse', marginBottom: '20px' }}>\n                                    <thead>\n                                        <tr style={{ backgroundColor: '#f2f2f2' }}>\n                                            <th style={{ padding: '4px', border: '1px solid #ddd', textAlign: 'left' }}>Cant.</th>\n                                            <th style={{ padding: '4px', border: '1px solid #ddd', textAlign: 'left' }}>Detalle</th>\n                                            <th style={{ padding: '4px', border: '1px solid #ddd', textAlign: 'right' }}>Unitario</th>\n                                            <th style={{ padding: '4px', border: '1px solid #ddd', textAlign: 'right' }}>Total</th>\n                                        </tr>\n                                    </thead>\n                                    <tbody>\n                                        {(pedido.products || []).map((item, index) => (\n                                            <tr key={index}>\n                                                <td style={{ padding: '4px', border: '1px solid #ddd' }}>{item.quantity}</td>\n                                                <td style={{ padding: '4px', border: '1px solid #ddd' }}>{`${item.product.nombre} ${item.product.peso}Kg`}</td>\n                                                <td style={{ padding: '4px', border: '1px solid #ddd', textAlign: 'right' }}>{formatCurrency(item.product.selectedPrice.price)}</td>\n                                                <td style={{ padding: '4px', border: '1px solid #ddd', textAlign: 'right' }}>{formatCurrency(item.product.selectedPrice.price * item.quantity)}</td>\n                                            </tr>\n                                        ))}\n                                    </tbody>\n                                </table>\n                                \n                                <div style={{ textAlign: 'right', fontWeight: 'bold', fontSize: '1.2em', color: '#333', marginTop: '15px' }}>\n                                    Total Pedido: {formatCurrency(totalPedido)}\n                                </div>\n\n                                <div style={{display:\"flex\", justifyContent:\"flex-end\", padding:\"1rem\"}}>\n                                    <button \n                                        onClick={() => handleSendWhatsApp(pedido, totalPedido)} \n                                        style={{\n                                            padding:'10px 20px', \n                                            backgroundColor: '#25D366', \n                                            color: 'white', \n                                            border: 'none', \n                                            borderRadius: '5px',\n                                            cursor: 'pointer',\n                                            fontWeight: 'bold',\n                                            boxShadow: '0 2px 4px rgba(0,0,0,0.2)'\n                                        }}\n                                    >\n                                        Enviar por WhatsApp\n                                    </button>\n                                </div> \n                            </div>\n                        )\n                    })}\n                </div>\n            )}\n        </div>\n    );\n}\n","import { getFirestore, collection, onSnapshot } from 'firebase/firestore';\nimport app from '../../config';\n\nconst db = getFirestore(app);\n\nexport const listenPedidos = (callback) => {\n  const pedidosCol = collection(db, 'pedidos');\n  \n  const unsubscribe = onSnapshot(pedidosCol, (snapshot) => {\n    const pedidos = [];\n    snapshot.forEach((doc) => {\n      pedidos.push({ id: doc.id, ...doc.data() });\n    });\n    callback(pedidos);\n  });\n\n  return unsubscribe;\n};\n"],"names":["module","exports","require","vendored","ReactDOM"],"mappings":"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","ignoreList":[0]}